Layoffs happened because they overexpanded and took on too many projects - projects they could no longer fund or find profitable now that their cost of capital is drastically higher.
I'm not defending the way Google handled their layoffs (which was particularly savage and ugly), but the rationale behind the decision is completely sound.
Or shit, if Google is hugely profitable and cutting such great employees, then surely those laid off employees will be able to cut into their market share in some domain and slice off a few hundred million for themselves? Unless, of course, they weren't the ones really producing anything of value, and were instead leeching off of the work of others?
And yet what has Google really managed to do in the past decade, other than create a graveyard of pet projects that no one wanted to bother maintaining? Sure, there have been a few things here and there, but it's largely been a playground for people to go and make $500k/year fucking around on passion projects that largely duplicated other stuff and didn't integrate with anything else. Or if it did integrate with other stuff, it required an entire team to keep working.
Google isn't a charity. It's a tech company that has gotten extraordinarily bloated over the years. It gained 12,000 employees last fall alone, for almost 200,000 employees in total.