I think it's confirmation bias. There are many kids that play with barbies that turn out straight, and many that don't that turn out gay. But people forget the former and the latter, they only remember a kid who plays with barbies turn out gay. They connect the dots, even if there is no correlation. Then those anecdotes become the "data" for that idea.
It doesn't really make sense at that age that they'd connect their gayness with whether they play with barbies or superheros.
Believing someone who plays with cars/barbies is of the corresponding gender is age old myth that being gay is being "a weak pussy".
It's a damaging myth that gay men are basically women and like "female" things. Gay men are men and there's nothing about being attracted to other men that automatically makes you effeminate like a woman. Honestly what you're describing sounds more like trans or - hear me out - just a kid with his own likes and personality that don't necessarily say anything about his sexuality, whatever that happens to be.
It plays into the bullshit stereotype that because gay men are attracted to men and only women are supposed to be attracted to men, gay men must therefore act like women because they're attracted to men.
Not because being gay makes you effeminate but rather because being gay makes you more likely to reject toxic masculinity. A lot of what we consider "effeminate" (being in touch with/expressing your feelings, having female friends, caring about your appearance, liking your space to be tidy and well decorated etc) aren't actually female things at all, they're normal human things that are denied to men due to toxic masculinity.