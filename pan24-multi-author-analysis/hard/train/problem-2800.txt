The difference in my opinion is that Ukraine is willing to fight for its freedom while Afghanistan is just a basket case that gave up without a fight. Heck France lasted longer in WWII than Afghanistan and they were up against the Luftwaffe and had nothing but a few trees and an open field between Paris and the Belgian border.
Edit: even when France surrendered, many of its people kept up the Resistance and Germany was constantly dealing with internal sabotage. Meanwhile the Taliban seem to be largely unopposed by ordinary Afghan citizens. I am left with the conclusion that the average Afghan man at least tacitly supports the Taliban, even in liberal bastions like Kabul.
Afghanistan's social issues are not small, especially in villages, and even in the cities, but there is a massive gulf between the average village and the Taliban, and an ocean between Kabul now, and Kabul under the U.S. supported Afghan Government. The Government that the majority of Afghans supported, even if they thought it was corrupt, represented the Afghans far more than the Taliban.
A lot of people, including women, support the taliban government. Taliban isn't run by evil monsters, but by humans. And not just men, but also women. You may call it an atrocity, which i agree with, but for a lot of people it's simply law and order.