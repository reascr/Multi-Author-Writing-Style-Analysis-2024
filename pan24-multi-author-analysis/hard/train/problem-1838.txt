In Ukraine the Russian military is "just" abducting thousands of Ukrainian children and taking them to Russia "for safety". Meets the UN definition of genocide, but isn't as serious as killing people on a large scale.
This current era where countries don't actually want to commit mass genocide and colonize a country is an abnormality in human history. Take the USSR and America. If their invasions of Afghanistan had occured in the 1800s they simply would have killed most of the fighting age boys in the local area where the insurgent attacks took place, made sure the populous knew that any attacks on them was gonna result in their sons, fathers and husbands being killed in the immediate area rather they were guilty or not. The population falls in line fairly quick. Then they would have moved in a lot of their own foreign nationals to shape the country similar to their own values. Now countries really don't do that thankfully but that will change back to the norm in the coming decades as climate change and resource scarcity puts pressure on larger countries. Invasion and conquest to take plunder will be back on the menu.
None of those wars were over resources. They were over geopolitical gains mainly because of where Afghanistan was located. Also the tech between countries at the time was much more even. That won't be the case in the future. It will be organized militaries with the sole purpose of killing or displacing the population to dig out their insane amounts of lithium and other rare earth metals. It won't be a war, it will be a massacre with the Afghani people coming out the loser. You don't have to worry about insurgents or any other enemies hiding within the civilian populations if the civilian population are corpses.
It won't even last till the end of this century. In the coming decades natural resources are gonna become even more needed than now and a bigger country will take over Afghanistan again. This time they won't have to worry about insurgents or the Taliban because they will simply be killing most of the population. The land under their feet is far more valuable than the actual people in the country who's main export is opium, that's the sad truth of the matter.
There is a difference between leaving because of military defeat and leaving because you're sick of being there after accomplishing your mission. America left because of the latter. The US was there solely to take down Al Qaeda which they accomplished. All leaders of the group have been killed and their regional and world influence is almost nonexistent compared to other terrorist groups now. There was no point in staying and continuing to try and nation build anymore.