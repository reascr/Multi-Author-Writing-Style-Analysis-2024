Just next door in Iran, 60% of all college grads are women. Look where that got them today. The people are smart and fighting for their rights. Taliban doesn't want to deal with that so they go back to the old ways.
The problem isn't "beating" the Taliban the problem is how do you defeat them. For the west that means basically ending their organisation's influence in the country.
Given Afghani culture and history, to achieve that we would have had to stay there a lot longer and meddle a lot more to provide for democratic governments, abandoning tribal culture etc. Frankly we would have had to forcefully re-engineer their society to fit what we see in the west as an ideal society.
The truth is we are still present in Iraq and not Afghanistan because Afghanistan doesn't have oil. The only major export Afghanistan has is opium poppies, which the criminal Taliban will make more money off than western governments ever would.
Are they buying under the table from Afghanistan, which has forests of opium poppies growing, or do they grow their own, or what?
An opium puppy's juice is 40% morphine and there's lots of other useful stuff there, like codeine, and I think the roots of the plant are the active ingredient in the anti diarrheal Lomotil.