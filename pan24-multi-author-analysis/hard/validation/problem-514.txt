To be completely honest i don't think the entire pakistan was in on supporting the Taliban. Most probably one of the army or ISI factions helped the Taliban and now that the US is gone, those generals are using taliban to attack pro west parts of the army in an effort to seize power.
The ISI since 2021 supported the taliban's re-occupation of afghanistan, and stopped the GHQ's attempts at a ground invasion against the TTP. In Nov 2021 the GHQ overthrew the ISI, and in April 2022 overthrew the isi's allies in the civilian government in a soft-coup, and now the GHQ has a free hand in doing what it wants, which is tackling the TTP in afghanistan's provinces adjacent to pakistan.
it's actually a difference in opinion among the elites. the ISI has ideological or even islamic links with the Haqqani Network dating to the Soviet War. The GHQ or the central pakistan army doesn't see the taliban favourably but merely as an asset. They would support the ISI in their afghanistan policy, if it was in their interests. But the GHQ would also attack the taliban if it was in their security interests.
Every Military dictatorship in Pakistan has been extremely beneficial for its economy. You are right that shifting to a civilian government is a problem, because civilian governments always mismanage the economy due to factionalism and sometimes nationalization in the case of Bhutto.
Only 2006+India's GDP recently started outpacing Pakistan. 2006 was the time the TTP was born, the War on Terror was in full swing.